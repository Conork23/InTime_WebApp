var stats={init:function(t,a){var e=this;this.accuracyGraph(t,a),this.autoSuggestions();var r;$.get("../stats/ajax",function(t,a){r=e.setMainGraph(t)}),$("button.checkBtn").click(function(){var t=$(".to-input input.tt-input").val(),a=$(".from-input input.tt-input").val();$.get("../stats/ajax?to="+t+"&from="+a,function(t,a){e.updateGraph(t,r)})})},accuracyGraph:function(t,a){for(var e=t.all,r=a.reverse(),n=[],i=0;i<e.length;i++)date=r[i].time.substring(0,10),year=date.substring(2,4),month=date.substring(5,7),day=date.substring(8,10),lable=day+"/"+month+"/"+year,n[i]=lable;var t={labels:n,datasets:[{label:"Accuracy",data:e,backgroundColor:"rgba(22, 24, 254, 0.5)",borderColor:"rgba(22,24,254,1)",borderWidth:1}]},s=$("#accuracy_graph");new Chart(s,{type:"bar",data:t,options:{responsive:!0,scales:{yAxes:[{ticks:{beginAtZero:!0}}]}}})},autoSuggestions:function(){$(".from-input .typeahead").typeahead({highlight:!0,minLength:1,limit:10},{source:function(t,a){return $.get("../stats/ajax?distinct=true&from="+t,function(t){return a(t)})},templates:{empty:'<div class="empty-message">No matches.</div>'}}),$(".to-input .typeahead").typeahead({highlight:!0,minLength:1,limit:10},{name:"to",source:function(t,a){return $.get("../stats/ajax?distinct=true&to="+t,function(t){return a(t)})},templates:{empty:'<div class="empty-message">No matches.</div>'}})},setMainGraph:function(t){for(var a=t.length,e=0,r=0;r<a;r++)t[r].arrivedOnTime&&(e+=1);var n=a-e,t={labels:["Arrived In Time","Didn't Arrive In Time"],datasets:[{data:[e,n],backgroundColor:["rgba(22, 24, 254, 0.5)","rgba(254, 24, 22, 0.5)"],hoverBackgroundColor:["rgba(22, 24, 254, .65)","rgba(254, 24, 22, .65)"]}]},i={responsive:!0,animation:{animateScale:!0},legend:{display:!0,labels:{fontColor:"rgb(255, 255, 255)"}}};$("#main-graph").remove(),$(".main-graph").append('<canvas id="main-graph"></canvas>');var s=$("#main-graph");return new Chart(s,{type:"pie",data:t,options:i})},updateGraph:function(t,a){for(var e=t.length,r=0,n=0;n<e;n++)t[n].arrivedOnTime&&(r+=1);var i=e-r;a.chart.config.data.datasets[0].data=[r,i],a.update()}};$(document).ready(function(){stats.init(data,results)});